<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email and Password Verification with Timer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
            flex-direction: column;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            margin-top: 20px;
        }
        input[type="email"], input[type="password"], select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        .hidden {
            display: none;
        }
        .error {
            color: red;
            font-size: 0.9em;
        }
        .intro {
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            color: #333;
        }
    </style>
</head>
<body>

<div class="intro">
    <p>Please remember to return the borrowed equipment on time. Choose the appropriate timer after verifying your email and password. If you do not return on time, you will receive reminders, and eventually, you will be asked to see the dean.</p>
</div>

<div class="container">
    <form id="emailForm" class="emailForm">
        <h2>Enter your email</h2>
        <input type="email" id="email" placeholder="Email" required>
        <button type="button" onclick="showPasswordField()">Next</button>
    </form>

    <form id="passwordForm" class="passwordForm hidden">
        <h2>Verify with your password</h2>
        <input type="password" id="password" placeholder="Password" required>
        <button type="button" onclick="verifyPassword()">Submit</button>
        <div id="error" class="error hidden">Incorrect password. Please try again.</div>
    </form>

    <form id="timerForm" class="timerForm hidden">
        <h2>Set a Timer</h2>
        <select id="timerSelect">
            <option value="600">10 minutes</option>
            <option value="1800">30 minutes</option>
            <option value="3600">1 hour</option>
            <option value="5400">1 hour 30 minutes</option>
        </select>
        <button type="button" onclick="startTimer()">Start Timer</button>
        <button type="button" onclick="cancelAction()">Cancel</button>
    </form>
</div>

<script>
    const storedCredentials = {
        "user@example.com": "password123",
        "anotheruser@example.com": "mypassword",
        "yourname@example.com": "yourpassword"  // Your email and password added here
    };

    let timerInterval;
    let reminderCount = 0;

    function showPasswordField() {
        const email = document.getElementById("email").value;
        if (email in storedCredentials) {
            document.getElementById("emailForm").classList.add("hidden");
            document.getElementById("passwordForm").classList.remove("hidden");
        } else {
            alert("Email not found. Please try again.");
        }
    }

    function verifyPassword() {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        if (password === storedCredentials[email]) {
            document.getElementById("passwordForm").classList.add("hidden");
            document.getElementById("timerForm").classList.remove("hidden");
        } else {
            document.getElementById("error").classList.remove("hidden");
        }
    }

    function startTimer() {
        let selectedTime = parseInt(document.getElementById("timerSelect").value);
        const email = document.getElementById("email").value;

        timerInterval = setInterval(() => {
            if (selectedTime > 0) {
                selectedTime--;
                console.log(`Time left: ${selectedTime} seconds`);
            } else {
                clearInterval(timerInterval);
                sendReminder(email);
            }
        }, 1000);
    }

    function sendReminder(email) {
        if (reminderCount < 3) {
            console.log(`Reminder sent to ${email}. Please return the equipment.`);
            reminderCount++;
            setTimeout(() => sendReminder(email), 60000); // Send reminder every 1 minute
        } else {
            alert("Please see the dean for not returning the equipment on time.");
            window.close();
        }
    }

    function cancelAction() {
        clearInterval(timerInterval);
        window.close();
    }
</script>

</body>
</html>
